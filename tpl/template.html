<meta charset="utf-8">
<script src="../lib/handlebars.js"></script>
<script id="todo-template" type="text/x-handlebars-template">
    <div class="view">
        <button class="todo-play-destroy icon-play"></button>
        <label>{{todo}}</label>
    </div>
    <input class="edit" value="{{todo}}">
</script>
<script>

    var templates = [];
    var source = document.getElementById('todo-template').innerHTML;
    templates['todo'] = Handlebars.compile(source);

    window.addEventListener('message', function(event) {

        var name = event.data.name || 'default';
        switch(name) {
            case 'todo':
                event.source.postMessage({
                    name: name,
                    html: templates[name](event.data.context)
                }, event.origin);
                break;
        }
    });

</script>